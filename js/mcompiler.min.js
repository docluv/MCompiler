/*!
 * mcompiler v0.0.1 (https://github.com/docluv/mcompiler)
 * Copyright 2013-2014 Chris Love
 * Licensed under MIT (https://github.com/docluv/mcompiler/LICENSE)
 */
!function(a,b){"use strict";var c=function(a){var b=new c.fn.init;return b.bp=a.bp||backpack(),b.eventPrefix=a.eventPrefix||"spa-",b.$rootScope=a.rootScope||b.$rootScope,b.templateService=a.templateService||b.templateService,b.templateType=a.templateType||b.templateType,b.templateService||console.error("must define a template service provider"),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",bp:b,eventPrefix:"spa-",$rootScope:b,templateService:b,templateType:"text/x-mustache-template",getTemplates:function(a){var b,c,d=document.querySelectorAll("script[type='"+this.settings.templateType+"']"),e=$.parseLocalStorage("templates");for(b=0;b<d.length;b++)c=d[b],that.templateService.setTemplate(c.id,c.innerHTML.replace(/(\r\n|\n|\r)/gm,"")),a&&c.parentNode&&c.parentNode.removeChild(c);localStorage.setItem("templates",JSON.stringify(e))},bindings:{click:b,keyup:b,change:b},mergeData:function(a,c,d,e){if("string"!=typeof a||"string"!=typeof c||d===b&&e===b)return void console.error("missing argument in mergeData");e===b&&(e=d,d=b);var f=this,g=document.querySelector(a);g.length&&g.length>0&&(g=g[0]),requestAnimationFrame(function(){g.innerHTML=f.templateService.mergeData(c,e),d&&f.parseEventBinding(g,d)})},parseEventBinding:function(a,b){if(a&&!b){var c,d,e=this,f=a.querySelectorAll("[spa-*]");for(c in e.bindings)d=e.bindings[c],[].forEach.call(f,function(a){a.hasAttribute("spa-"+c)&&(d?d(a,b[a.getAttribute("spa-"+c)]):a.addEventListener(c,function(d){b[a.getAttribute("spa-"+c)](d)}))})}}},c.fn.init.prototype=c.fn,a.mcompiler=c}(window),function(a,b,c){var d=function(){return new d.fn.init};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.1",tempalates:{},setTemplate:function(a,b){this.templates[a]=Mustache.compile(b)},setTemplates:function(a){var b=this;for(template in a)b.setTemplate(template,a[template])},getTemplate:function(a){return this.templates[a]},getTemplates:function(){return this.tempalates},removeTemplate:function(a){delete this.templates[a]},mergeData:function(a,b){var d=this;return"string"!=typeof a||b===c||null===b?void console.error("missing argument in mergeData"):d.templates[a](b)}},d.fn.init.prototype=d.fn,a.mustachService=d}(window,mustache);